<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>百化分 · 工具</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <a class="home-link" href="index.html">← 返回首页</a>
    <h1>百化分 · 小练习</h1>
    <p class="sub">把百分数和分数 1/n 互相转换，提升资料分析做题速度</p>
  </header>

  <section class="toolbar">
    <label>
      模式：
      <select id="mode">
        <option value="p2n">百分数 → n（1/n）</option>
        <option value="n2p">n（1/n） → 百分数</option>
        <option value="formula">公式法：n ≈ 100/x</option>
        <option value="nearby">取中/放缩判断</option>
        <option value="challenge60">60秒挑战</option>
        <option value="review">复习错题</option>
      </select>
    </label>
    <button id="btn-next">下一题</button>
    <button id="btn-show-tip">显示提示</button>
    <button id="btn-show-table">速记表</button>
    <button id="btn-clear-wrong">清空错题本</button>
    <button id="btn-view-wrong">错题本</button>
  </section>

  <main class="panel">
    <div id="question" class="question">点击“下一题”开始</div>

    <div id="answer-area" class="answer-area">
      <input id="answer-input" type="text" placeholder="在此作答" />
      <div id="choices" class="choices"></div>
      <button id="btn-submit">提交</button>
    </div>

    <div id="result" class="result"></div>

    <div id="tip" class="tip" hidden></div>
  </main>

  <section id="table" class="table" hidden>
    <h2>常见百分数 ≈ 1/n 口袋表</h2>
    <div class="grid" id="pocket-grid"></div>
    <p class="note">说明：接受微小误差（±0.2%），如 1/15 可记 6.6% 或 6.7% 均判对。</p>
  </section>
  <section id="wrong-panel" class="table" hidden>
    <h2>错题本</h2>
    <div id="wrong-actions" style="margin:8px 0 10px;">
      <button id="btn-import-wrong">导入错题</button>
      <input id="file-import-wrong" type="file" accept="application/json" style="display:none">
      <button id="btn-export-wrong">导出错题</button>
    </div>
    <div id="wrong-list" class="grid"></div>
    <p class="note">提示：题目做错时会自动加入错题本；可在上方“复习错题”模式随机练，也可在此页重做或删除。</p>
  </section>

  <section class="cards">
    <details>
      <summary>技巧卡片：放缩法 / 取中法 / 公式法 与误差修正</summary>
      <div class="card-body">
        <h3>1）放缩法</h3>
        <ul>
          <li>14.3%≈1/7，则 1.43%≈1/70</li>
          <li>6.7%≈1/15，则 13.4%≈(1/15)×2≈1/7.5</li>
          <li>1.9%≈2%＝1/50</li>
        </ul>
        <h3>2）取中法</h3>
        <ul>
          <li>18.5% 介于 16.7%(≈1/6) 和 20%(=1/5) 之间，取中≈1/5.5</li>
          <li>15.4% 介于 14.3%(≈1/7) 和 16.7%(≈1/6) 之间，取中≈1/6.5</li>
        </ul>
        <h3>3）公式法</h3>
        <p>若 x%≈1/n，记忆不稳时用 n≈100/x（保留 1 位小数）。如 44%→n≈100/44≈2.3→≈1/2.3。</p>
        <h3>误差修正（直觉版）</h3>
        <p>用 1/8 代替 13%：13%×8≈104%，因此结果偏小约 4%，需 +4%；
        用 1/8 代替 12%：12%×8≈96%，结果偏大约 4%，需 −4%。
        若考虑分母 1+r 的影响，13% 与 1/8 的更精确误差≈4%−0.5%=3.5%。</p>
      </div>
    </details>
  </section>

  <footer>
    <span id="score">得分：0 / 0</span>
    <span id="wrong">错题本：0</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>

